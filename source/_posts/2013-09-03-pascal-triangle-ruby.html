---
title: "帕斯卡三角形 (Ruby)"
date: 2013-09-03
layout: post
categories: algorithm ruby
published: true
comments: true
---

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">帕斯卡三角形</h2>
<div class="outline-text-2" id="text-1">

<div class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/PascalTriangleAnimated2.gif/210px-PascalTriangleAnimated2.gif" align="right" alt="210px-PascalTriangleAnimated2.gif"/></p>
</div>

<div class="org-src-container">

<pre class="src src-ruby"><span style="color: #859900; font-weight: bold;">def</span> <span style="color: #268bd2;">pascal_triangle</span>(n, i = 2, result = [[1], [1,1]])
  <span style="color: #859900; font-weight: bold;">if</span> n == 1
    [[1]]
  <span style="color: #859900; font-weight: bold;">elsif</span> n == 2
    [[1], [1,1]]
  <span style="color: #859900; font-weight: bold;">elsif</span> i == n
    result
  <span style="color: #859900; font-weight: bold;">else</span>
    current_row = [1]
    (i-1).times <span style="color: #859900; font-weight: bold;">do</span> |n|
      current_row &lt;&lt; (result[i-1][n] + result[i-1][n+1])
    <span style="color: #859900; font-weight: bold;">end</span>
    current_row &lt;&lt; 1

    pascal_triangle(n, i+1, result &lt;&lt; current_row)
  <span style="color: #859900; font-weight: bold;">end</span>
<span style="color: #859900; font-weight: bold;">end</span>
</pre>
</div>

<ul class="org-ul">
<li>Image reference: <a href="https://zh.wikipedia.org/zh-tw/%25E6%259D%25A8%25E8%25BE%2589%25E4%25B8%2589%25E8%25A7%2592%25E5%25BD%25A2">Pascal-triangle Wikipedia-chi</a>
</li>
</ul>
<p>
<!-- more -->
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Output</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">

<pre class="src src-ruby">pst = pascal_triangle(7)

puts pst.pretty_inspect

<span style="color: #586e75;">=begin</span>
<span style="color: #586e75;">[[1],</span>
<span style="color: #586e75;"> [1, 1],</span>
<span style="color: #586e75;"> [1, 2, 1],</span>
<span style="color: #586e75;"> [1, 3, 3, 1],</span>
<span style="color: #586e75;"> [1, 4, 6, 4, 1],</span>
<span style="color: #586e75;"> [1, 5, 10, 10, 5, 1],</span>
<span style="color: #586e75;"> [1, 6, 15, 20, 15, 6, 1]]</span>
<span style="color: #586e75;">=&gt; nil</span>
<span style="color: #586e75;">=end</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Check</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<pre class="src src-ruby">pst.map {|row| row.reduce(<span style="color: #268bd2; font-weight: bold;">:+</span>) == 2 ** (row.length - 1) }
<span style="color: #586e75;"># </span><span style="color: #586e75;">=&gt; [true, true, true, true, true, true, true]</span>
</pre>
</div>
</div>
</div>
